var perm_table = [126,148,127,97,66,64,181,14,235,237,169,174,56,109,153,80,85,110,239,233,76,50,111,1,205,197,63,20,161,36,33,37,35,147,119,53,186,38,49,234,209,202,128,106,121,26,176,55,31,86,182,211,152,3,41,81,134,252,167,5,221,68,200,46,179,172,51,112,24,208,103,89,19,228,124,84,143,40,105,57,191,132,249,244,140,216,163,157,224,222,193,212,250,199,60,52,204,255,138,87,144,225,195,93,226,146,101,166,82,28,168,189,78,94,142,131,192,218,21,180,149,150,16,229,88,194,17,141,18,34,188,155,165,116,83,8,75,69,139,13,25,162,72,223,137,253,118,7,232,43,108,22,79,196,65,117,44,104,231,100,158,74,219,238,0,113,178,123,177,247,95,220,115,198,10,187,2,130,245,70,96,62,91,58,42,154,159,190,145,122,185,201,102,61,77,32,206,12,207,184,156,48,236,29,90,160,248,92,173,213,254,4,67,133,183,9,129,15,54,120,114,59,171,215,39,175,243,136,230,30,170,47,164,98,210,107,99,242,240,227,27,251,125,71,217,135,203,241,151,6,73,214,11,45,246,23]

module.exports = function acm_hash(s) {
  var i, j, h 
  var byte_hash = []

  for (j = 0; j < 4; j++) byte_hash[j] = 0

  j = 0
  for (i = 0; i < 4; i++) {
    byte_hash[j] = perm_table[byte_hash[j]] ^ s.charCodeAt(i)
    j++
    if (j == 4) j = 0
  }

  h = 0
  for (j = 0; j < 4; j++) { 
    h = (h << 8) | byte_hash[j]
  }
  h =  h < 0 ? -h : h
  return h.toString(16)
}


